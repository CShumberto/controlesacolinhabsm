<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>CRUD Firebase Firestore com DataTables</title>

    <!-- CSS do DataTables -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- JavaScript do DataTables -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.6/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.6/firebase-firestore-compat.js"></script>

    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyC28CYNjHhUi8rOwrASXdRJ1cm2PV6fEW4",
    authDomain: "controlemensal-sacolinhas.firebaseapp.com",
    databaseURL: "https://controlemensal-sacolinhas-default-rtdb.firebaseio.com",
    projectId: "controlemensal-sacolinhas",
    storageBucket: "controlemensal-sacolinhas.appspot.com",
    messagingSenderId: "925424065013",
    appId: "1:925424065013:web:cf961586c6300ceb1468bc"
        };

        // Inicialize o Firebase
        firebase.initializeApp(firebaseConfig);

        // Obtenha uma referência para a coleção onde deseja armazenar os dados
        const db = firebase.firestore();
        const dadosCollection = db.collection('controlemensal-sacolinhas');

        // Função para carregar dados do Firebase e preencher a tabela
        function carregarDados() {
            dadosCollection.get().then((querySnapshot) => {
                const tabela = $('#tabela-dados').DataTable();
                tabela.clear().draw(); // Limpa a tabela antes de adicionar dados
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    tabela.row.add([
                        data.Dia,
                        data['Número da Loja'],
                        data['Nome do Operador'],
                        data['TOTAL Easy Open Bag G'],
                        data['TOTAL Planeta Agradece P'],
                        data['Total de Sacolinhas (UN)'],
                        data['Valor total sacolinha G (R$)'],
                        data['Valor total sacolinha P (R$)'],
                        data['Valor Total sacolinha (R$)'],
                        data['Venda total mensal (R$)'],
                        data['% Faturamento'],
                        data['Observação'],
                        `<button onclick="editarRegistro('${doc.id}')">Editar</button>`,
                        `<button onclick="excluirRegistro('${doc.id}')">Excluir</button>`
                    ]).draw();
                });
            }).catch((error) => {
                console.error('Erro ao carregar dados:', error);
            });
        }

        // Chame a função para carregar dados quando a página carregar
        $(document).ready(function () {
            carregarDados();
        });
    </script>
</head>
<body>
    <h1>CRUD Firebase Firestore com DataTables</h1>

    <!-- Tabela de dados -->
    <table id="tabela-dados" class="display">
        <thead>
            <tr>
                <th>Dia</th>
                <th>Número da Loja</th>
                <th>Nome do Operador</th>
                <th>TOTAL Easy Open Bag G</th>
                <th>TOTAL Planeta Agradece P</th>
                <th>Total de Sacolinhas (UN)</th>
                <th>Valor total sacolinha G (R$)</th>
                <th>Valor total sacolinha P (R$)</th>
                <th>Valor Total sacolinha (R$)</th>
                <th>Venda total mensal (R$)</th>
                <th>% Faturamento</th>
                <th>Observação</th>
                <th>Editar</th>
                <th>Excluir</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</body>
</html>


		
